**python**
- [简介](#简介)
- [数据类型](#数据类型)
- [数据结构](#数据结构)
- [内存管理](#内存管理)
- [并发控制](#并发控制)

## 简介
```
变量
- 变量没有地址，变量名不会转换成地址

赋值
赋值 = 绑定引用

对象创建过程
- 调用 __new__()
- 创建实例对象
- 调用 __init__()
- 返回对象

命名空间&作用域
- 命名空间决定名字存在哪里
- 作用域决定名字去哪里找
```
## 数据类型
```
分类
- 基本数据类型
  - int
  - float
  - bool
  - str
    - 格式化 %、format、f
  - None
- 复合数据类型
  - list
    - 列表推导式
      优雅、简洁的创建列表
      [表达式 for 变量 in 可迭代对象]
    - range
      惰性生成数字序列
      range(start, stop, step)
  - tuple
  - set
  - frozenset
  - dict

可变 & 不可变
- 不可变类型
  对象创建后，其内容不能改变，对不可变对象的操作会创建新对象
- 可变类型
  对象创建后，其内容可以改变，对可变对象的操作修改原对象
  list、set、dict

函数
- lambda
  - 匿名函数，可以接受任意多个参数（包括可选参数）并且返回单个表达式值得函数
  - lambda 参数: 表达式
- 闭包函数
  - 它记住了它在被创建时所处的上下文

迭代器
迭代器是一个可以记住遍历位置的对象。
- 实现
  - __iter__(): 返回迭代器对象本身
  - __next__(): 返回下一个元素
- 和可迭代对象区别
  - 可迭代对象  不维护迭代状态
  - 迭代器  记住遍历位置

生成器
一种特殊的迭代器，可以按需生成值，而不是一次性创建所有值
- 实现
  - yeild
  - 生成器表达式

装饰器
- 作用
  在不修改原有函数代码的情况下增加函数的功能
- 使用
  - 使用@修饰
- 分类
  - 带参数装饰器
  - 无参数装饰器
- 常见装饰器
  - functools.wraps(func)  保证被装饰的函数信息(__name__等)不丢失
  - functools.lru_cache  对相同参数的调用直接返回缓存结果，避免重复计算

多态
- OOP多态
  子类继承父类，实现抽象方法
- 鸭子类型多态
  不关心类型，只关心行为，多个类都实现相同的方法
- 协议多态
  协议定义了一组方法/属性签名，任何实现了这些签名的类都自动符合该协议

类
- 元类(metaclass)
  用来创建类的类，元类可以拦截、修改、控制类的创建过程
- __slots__
  __slots__  用于限制实例属性并避免创建实例__dict__(节省内存)

反射
Python通过内置函数如getattr()、setattr()、hasattr()和delattr()支持反射，允许程序员在运行时检查和修改对象的属性和方法
```

## 数据结构
```
dict
- 哈希冲突解决
  开放寻址法，对比拉链法的好处
  - 避免频繁的对象分配
  - 减少对象指针
  - 提高 CPU cache 命中率
- 如何保证插入顺序
  - indices(索引数组)，无序
  - entries(条目数组)，有序
- 元素删除
  标记删除，当被删除元素过多时，dict会重建哈希表
- rehash
  插入的时候，会判断是否需要rehash，然后对hash表进行重建，可能是扩容、缩容、容量不变，重建的过程清理已删除元素
```

## 内存管理
```
浅拷贝 & 深拷贝
- 浅拷贝  只复制对象本身，不会递归复制对象内部的嵌套对象  copy.copy()
- 深拷贝  不仅复制对象本身，也递归复制对象内的所有嵌套对象，创建所有对象的完整副本  copy.deepcopy()
对于不可变对象拷贝产生的都是原对象的引用

垃圾回收(同步)
- 引用计数
- 标记清除
  从root object出发，遍历所有的对象，只扫描可能形成循环引用的容器对象，不可变对象本身不会形成循环引用
  - 标记阶段，遍历所有的对象，如果是可达的(reachable)，也就是还有对象引用它，那么就标记该对象为可达
  - 清除阶段，再次遍历对象，如果发现某个对象没有标记为可达，则就将其回收
- 分代回收
  - 第0代(youngest)  新创建的对象，0代阈值：700(对象数)，自上次GC后新增的对象数
  - 第1代  经过一次垃圾收集后仍存活的对象，1代阈值：10(对象数)，自上次GC后新增的对象数
  - 第2代(oldest)  多次垃圾收集仍存活的对象，2代阈值：10(对象数)，自上次GC后新增的对象数
```

## 并发控制
```
GIL(全局解释器锁)
GIL是一个互斥锁（mutex），它确保在任何时刻，只有一个线程可以执行 Python 字节码
- 作用
  保证了引用计数的线程安全
- 绕过GIL的限制
  - 使用多进程（multiprocessing）
  - 使用asyncio（异步I/O）
```

学习资料  
[大模型工程师 Python 面试题，简单背一背](https://zhuanlan.zhihu.com/p/691103660)


