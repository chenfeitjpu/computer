HTTP

# 定义 #
超文本传输协议

# 内容 #
## 状态码 ##
  - 1xx 提示信息，协议处理的中间状态，还需要后续的操作
  - 2xx 成功，报文已经收到并被正确处理
    - 200 OK 正常
    - 204 No Content 没有body数据
    - 206 Partial Content 分段传输
  - 3xx 重定向，资源位置发生变动，需要客户端重新发送请求
    - 301 Move Permanently 永久重定向 
    - 302 Found 临时重定向
    - 304 Not Modified 资源未修改
  - 4xx 客户端错误，请求报文有误，服务器无法处理
    - 400 Bad Request 请求报文有误
    - 403 Forbidden 禁止访问
    - 404 Not Found 请求资源不存在
  - 5xx 服务端错误，服务器在处理请求时内部发生了错误
    - 500 服务器错误 
    - 501 客户端请求的功能不支持
    - 502 服务器作为网关或代理，后端服务器发生了错误
    - 503 服务器忙，暂时无法响应

## 常见字段 ###
  - Host 服务器域名
  - Connection 使用持久连接
  - Accept 客户端接受的数据格式
  - Accept-Encoding 客户端接受的数据压缩方式
  - Content-Length 服务器返回的数据长度
  - Content-Type 服务器返回的数据格式
  - Content-Encoding 服务器返回数据的压缩方式

## 请求方法 ##
  - GET 从服务器获取资源 安全且幂等
  - POST 向服务器提交数据 不安全且不幂等

## 特性 ##
  - 优点
    - 简单 
    - 易扩展
    - 跨平台
  - 缺点 
    - 无状态
    - 不安全
      - 明文传输，内容可能会被窃听
      - 不验证通信身份，可能会被冒充
      - 无法验证报文完整性，内容可能会被篡改

## HTTPS ##
特点  
  - 混合加密实现机密性，解决了窃听风险
  - 摘要算法实现完整性，解决了篡改风险
  - 将服务器公钥放入到数字证书，解决了冒充风险  

SSL/TLS通信流程
  - 客户端向服务器索要并验证公钥
  - 双方协商生成会话秘钥
  - 双方采用会话秘钥进行通信

SSL/TLS握手流程
  - 客户端发送ClientHello请求(SSL/TLS协议版本、随机数、密码套件列表)
  - 服务端发送ServerHello请求(SSL/TLS协议版本、随机数、密码套件列表、数字证书)
  - 客户端回应(随机数、加密算法改变通知、客户端握手结束通知)
  - 服务的回应(加密算法改变通知、服务端握手结束通知)

秘钥交换算法
  - RSA
  - ECDHE

优化
  - 硬件优化
  - 软件优化
  - 会话复用
  - 协议优化
  - 证书优化

## 优化 ##
  - 不发请求
    - 使用客户端缓存
  - 减少请求
    - 减少重定向请求次数
    - 合并请求
    - 延迟发送请求
  - 减少HTTP响应数据大小   
    - 无损压缩
    - 有损压缩

### HTTP1.1改进 ###
  - 长连接
  - 管线化(仅在理论上，需要客户端和服务器支持)

### HTTP2改进 ###
  - 头部压缩
    - 静态字典
    - 动态字典
    - Huffman编码
  - 二进制帧
  - 并发传输
  - 服务器推技术

### HTTP3/QUIC ###
  - 无队头阻塞
  - 更快的建立连接
  - 连接迁移
